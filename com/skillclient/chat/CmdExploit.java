package com.skillclient.chat;

import java.util.ArrayList;
import java.util.List;
import java.util.Arrays;

public class CmdExploit extends Cmd
{
    public static String cmd;
    public static String target;
    
    public CmdExploit() {
        super("exploit", "Sets the Exploit Command for some Exploit-Items");
        CmdExploit.cmd = "op " + CmdExploit.mc.getSession().username;
        CmdExploit.target = CmdExploit.mc.getSession().username;
    }
    
    @Override
    public void action(final String[] args) {
        final String s = (args.length == 0) ? "" : String.join(" ", (CharSequence[])Arrays.copyOfRange(args, 1, args.length));
        if (args.length != 0 && args[0].equalsIgnoreCase("cmd")) {
            CmdExploit.cmd = s.replaceFirst("/", "");
            CmdExploit.sc.chat.chat("Set Exploit cmd to /" + CmdExploit.cmd);
        }
        else if (args.length != 0 && args[0].equalsIgnoreCase("target")) {
            CmdExploit.target = s;
            CmdExploit.sc.chat.chat("Set Exploit target to " + CmdExploit.target);
        }
        else {
            CmdExploit.sc.chat.chat(".exploit cmd /" + CmdExploit.cmd, ".exploit cmd");
            CmdExploit.sc.chat.chat(".exploit target " + CmdExploit.target, ".exploit target");
        }
    }
    
    @Override
    public List<String> tabComplete(final String[] args) {
        final List<String> cmds = new ArrayList<String>();
        if (args.length == 1) {
            String[] array;
            for (int length = (array = new String[] { "cmd", "target" }).length, i = 0; i < length; ++i) {
                final String s = array[i];
                if (s.toLowerCase().startsWith(args[0].toLowerCase())) {
                    cmds.add(s);
                }
            }
        }
        return cmds;
    }
}

