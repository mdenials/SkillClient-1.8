package com.skillclient.modules.exploit;

import com.skillclient.events.api.EventTarget;
import net.minecraft.network.PacketBuffer;
import io.netty.buffer.Unpooled;
import net.minecraft.network.play.client.C17PacketCustomPayload;
import com.skillclient.events.EventPacketSend;
import com.skillclient.main.Register;
import com.skillclient.misc.ValueArray;
import com.skillclient.misc.Module;

public class BeaconExploit extends Module
{
    ValueArray<BeaconExploit.BeaconPotion> p1;
    ValueArray<BeaconExploit.BeaconPotion> p2;
    
    public BeaconExploit() {
        super("BeaconExploit", Register.Category.EXPLOIT, "Exploit for Survival to Spoof Beacons");
        this.p1 = (ValueArray<BeaconExploit.BeaconPotion>)new BeaconExploit.BeaconExploit$1(this, "Potion 1", (Module)this);
        this.p2 = (ValueArray<BeaconExploit.BeaconPotion>)new BeaconExploit.BeaconExploit$2(this, "Potion 2", (Module)this);
    }
    
    @EventTarget
    public void onSend(final EventPacketSend event) {
        if (event.getPacket() instanceof C17PacketCustomPayload && ((C17PacketCustomPayload)event.getPacket()).getChannelName().equals("MC|Beacon")) {
            final PacketBuffer packetbuffer = new PacketBuffer(Unpooled.buffer());
            packetbuffer.writeInt(((BeaconExploit.BeaconPotion)this.p1.getItem()).getPotionID());
            packetbuffer.writeInt(((BeaconExploit.BeaconPotion)this.p2.getItem()).getPotionID());
            ((C17PacketCustomPayload)event.getPacket()).data = packetbuffer;
        }
    }
}
