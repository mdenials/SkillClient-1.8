package com.skillclient.modules.exploit;

import com.skillclient.events.api.EventTarget;
import net.minecraft.network.Packet;
import com.skillclient.wrapper.SkillWrapper;
import net.minecraft.network.play.client.C03PacketPlayer;
import com.skillclient.events.EventUpdate;
import com.skillclient.main.Register;
import com.skillclient.misc.ValueBoolean;
import com.skillclient.misc.ValueNumber;
import com.skillclient.misc.Module;

public class Regen extends Module
{
    ValueNumber packets;
    ValueBoolean effect;
    
    public Regen() {
        super("Regen", Register.Category.EXPLOIT, "Regenerate Faster");
        this.packets = new ValueNumber("Packets", (Module)this, 500.0, 1.0, 1000.0, 0);
        this.effect = new ValueBoolean("Effect", (Module)this, false);
    }
    
    @EventTarget
    public void onUpdate(final EventUpdate event) {
        for (int i = 0; i < (double)this.packets.getValue(); ++i) {
            SkillWrapper.sendPacket((Packet)new C03PacketPlayer(true));
        }
    }
    
    public boolean isActive() {
        if (!super.isActive()) {
            return false;
        }
        if (this.effect.getValue()) {
            return Regen.mc.thePlayer.isPotionActive(10) && !Regen.mc.thePlayer.capabilities.isCreativeMode && Regen.mc.thePlayer.getHealth() < Regen.mc.thePlayer.getMaxHealth() && Regen.mc.thePlayer.getHealth() != 0.0f && (Regen.mc.thePlayer.onGround || Regen.mc.thePlayer.isInWater());
        }
        return !Regen.mc.thePlayer.capabilities.isCreativeMode && Regen.mc.thePlayer.getFoodStats().getFoodLevel() > 17 && Regen.mc.thePlayer.getHealth() < Regen.mc.thePlayer.getMaxHealth() && Regen.mc.thePlayer.getHealth() != 0.0f;
    }
}

